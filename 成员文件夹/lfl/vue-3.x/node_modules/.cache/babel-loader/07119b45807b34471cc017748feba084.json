{"remainingRequest":"/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/node_modules/babel-loader/lib/index.js!/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/src/components/SignUp.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/src/components/SignUp.vue","mtime":1563928745000},{"path":"/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/LiFulian/Desktop/ForumProject/成员文件夹/lfl/vue-3.x/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport md5 from 'js-md5';\nimport security from \"./Security\";\nimport axios from 'axios'; //引入后，可以使用get，post(推荐)\n\nexport default {\n  components: {\n    security: security\n  },\n  data: function data() {\n    return {\n      inputcode: '',\n      //动态储存用户输入的验证码\n      code: '',\n      //随机生成的4位数验证码，目标验证码，用来比对inputCode\n      password1: '',\n      //临时明文\n      user: {\n        username: \"\",\n        phone: \"\",\n        password: \"\" //加密后的密码\n\n      }\n    };\n  },\n  computed: {},\n  methods: {\n    sendCode: function sendCode() {\n      var _this = this;\n\n      axios.get(\"http://localhost:3000/users?phone=\" + this.user.phone).then(function (data) {\n        if (data.data.length == 0) {\n          //无此用户，可以注册,然后发送验证码\n          console.log(\"该手机号可以注册\");\n        } else {\n          //此用户已存在，请登录\n          console.log(\"有重复phone\");\n\n          _this.$store.dispatch('alert', \"您的手机号已注册请登录\");\n        }\n      });\n      this.code = Math.random().toString(10).slice(2, 6); // alert(\"http://v.juhe.cn/sms/send?mobile=\"+this.user.phone+\"&tpl_id=174546&tpl_value=%23code%23%3D\"+this.code+\"&key=157e3d5c80e9a2af12aac8e5dfa8be5b\")\n      // 这里验证验证码，如果成功再进行post\n      //  axios.post(\"http://v.juhe.cn/sms/send?mobile=\"+this.user.phone+\"&tpl_id=174546&tpl_value=%23code%23%3D\"+this.code+\"&key=157e3d5c80e9a2af12aac8e5dfa8be5b\")//axios请求数据\n      //   // .then(function(data){\n      //   //   // return data.data;//axios返回的。\n      //   //   //   return data.json();//vue-resourse请求才用。\n      //   //     console.log(data)\n      //   //   // this.blogs=data.body.slice(0,10)\n      //   //   // console.log(this.blogs)\n      //   // })  //无需返回数据\n    },\n    identify: function identify() {\n      this.user.password = md5(this.password1); //验证码正确之后才能post（），inputCode==code时\n\n      if (this.code == this.inputcode && this.code != '') {\n        this.post();\n      } else {\n        this.$store.dispatch('alert', \"您的手机号/验证码有错误\");\n      }\n    },\n    post: function post() {\n      var _this2 = this;\n\n      axios.post(\"http://localhost:3000/users\", this.user).then(function (data) {\n        console.log(data); // 储存cookie（应该是确定正确注册之后才储存cookie，一次）\n\n        _this2.$cookies.set('username', _this2.user.username, 3600 * 24 * 10);\n\n        _this2.$store.commit('signIn', _this2.$cookies.get(\"username\")); //改变为登录状态\n\n\n        console.log(\"post成功\");\n\n        _this2.$router.push({\n          path: '/mine'\n        });\n      }); // console.log(\"加密成功\")\n      // this.user.password = md5(this.password1);\n      // console.log(this.user)\n      //  axios.post(\"http://localhost:3000/users\",this.user).then(function(data){//这里的地址是第三方测试地址。不能真实写入，但是有响应\n      //   console.log(\"post成功\")\n      //   console.log(data)\n      // })\n    }\n  }\n};",{"version":3,"sources":["SignUp.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8DA,OAAA,GAAA,MAAA,QAAA;AACA,OAAA,QAAA;AACA,OAAA,KAAA,MAAA,OAAA,C,CAAA;;AAEA,eAAA;AACA,EAAA,UAAA,EAAA;AACA,IAAA,QAAA,EAAA;AADA,GADA;AAIA,EAAA,IAJA,kBAIA;AACA,WAAA;AACA,MAAA,SAAA,EAAA,EADA;AACA;AACA,MAAA,IAAA,EAAA,EAFA;AAEA;AACA,MAAA,SAAA,EAAA,EAHA;AAGA;AACA,MAAA,IAAA,EAAA;AACA,QAAA,QAAA,EAAA,EADA;AAEA,QAAA,KAAA,EAAA,EAFA;AAGA,QAAA,QAAA,EAAA,EAHA,CAGA;;AAHA;AAJA,KAAA;AAUA,GAfA;AAgBA,EAAA,QAAA,EAAA,EAhBA;AAmBA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,sBACA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,uCAAA,KAAA,IAAA,CAAA,KAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,YAAA,IAAA,CAAA,IAAA,CAAA,MAAA,IAAA,CAAA,EAAA;AAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,UAAA;AAEA,SAHA,MAGA;AAAA;AACA,UAAA,OAAA,CAAA,GAAA,CAAA,UAAA;;AACA,UAAA,KAAA,CAAA,MAAA,CAAA,QAAA,CAAA,OAAA,EAAA,aAAA;AACA;AACA,OARA;AASA,WAAA,IAAA,GAAA,IAAA,CAAA,MAAA,GAAA,QAAA,CAAA,EAAA,EAAA,KAAA,CAAA,CAAA,EAAA,CAAA,CAAA,CAVA,CAWA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAvBA;AAwBA,IAAA,QAxBA,sBAwBA;AACA,WAAA,IAAA,CAAA,QAAA,GAAA,GAAA,CAAA,KAAA,SAAA,CAAA,CADA,CAEA;;AACA,UAAA,KAAA,IAAA,IAAA,KAAA,SAAA,IAAA,KAAA,IAAA,IAAA,EAAA,EAAA;AACA,aAAA,IAAA;AACA,OAFA,MAEA;AACA,aAAA,MAAA,CAAA,QAAA,CAAA,OAAA,EAAA,cAAA;AACA;AACA,KAhCA;AAiCA,IAAA,IAjCA,kBAiCA;AAAA;;AACA,MAAA,KAAA,CAAA,IAAA,CAAA,6BAAA,EAAA,KAAA,IAAA,EAAA,IAAA,CAAA,UAAA,IAAA,EAAA;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,IAAA,EADA,CAEA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,EAAA,MAAA,CAAA,IAAA,CAAA,QAAA,EAAA,OAAA,EAAA,GAAA,EAAA;;AACA,QAAA,MAAA,CAAA,MAAA,CAAA,MAAA,CAAA,QAAA,EAAA,MAAA,CAAA,QAAA,CAAA,GAAA,CAAA,UAAA,CAAA,EAJA,CAIA;;;AACA,QAAA,OAAA,CAAA,GAAA,CAAA,QAAA;;AACA,QAAA,MAAA,CAAA,OAAA,CAAA,IAAA,CAAA;AAAA,UAAA,IAAA,EAAA;AAAA,SAAA;AACA,OAPA,EADA,CAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AApDA;AAnBA,CAAA","sourcesContent":["<template>\n  <form>\n    <!-- 用户名 -->\n    <div class=\"input-group\">\n      <span class=\"input-group-addon\" id=\"basic-addon1\">\n        <span class=\"glyphicon glyphicon-user\" aria-hidden=\"true\"></span>\n      </span>\n      <input\n        v-model=\"user.username\"\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\"你的昵称(2~5个字符)\"\n        aria-describedby=\"basic-addon1\"\n       \n      />\n    </div>\n    <!-- 手机号 -->\n    <div class=\"input-group\">\n      <span class=\"input-group-addon\" id=\"basic-addon1\">\n        <span class=\"glyphicon glyphicon-phone\" aria-hidden=\"true\"></span>\n      </span>\n      <input\n        v-model=\"user.phone\"\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\"手机号\"\n        aria-describedby=\"basic-addon1\"\n        required\n      />\n    </div>\n\n    <!-- 验证码 -->\n    <div class=\"input-group identify\" v-if=\"user.phone>13000000000 && user.phone<19999999999\">\n      <span class=\"input-group-addon\" id=\"basic-addon1\">\n        <span class=\"glyphicon glyphicon-ok-sign\" aria-hidden=\"true\"></span>\n      </span>\n      <input\n        v-model=\"code\"\n        type=\"text\"\n        class=\"form-control\"\n        placeholder=\"验证码\"\n        aria-describedby=\"basic-addon1\"\n        required\n      />\n      <div v-on:click=\"sendCode\" class=\"sendCodeBtn\">验证码</div>\n    </div>\n    <!-- 设置密码 -->\n    <div class=\"input-group\">\n      <span class=\"input-group-addon\" id=\"basic-addon1\">\n        <span class=\"glyphicon glyphicon-lock\" aria-hidden=\"true\"></span>\n      </span>\n      <input v-model=\"password1\" type=\"password\" id=\"inputPassword\" class=\"form-control\" placeholder=\"设置密码\" required />\n    </div>\n    <security></security>\n    <button v-on:click.prevent=\"identify\" class=\"btn btn-lg btn-primary btn-block\" type=\"submit\">注册</button>\n  \n\n  </form>\n</template>\n\n\n<script>\nimport md5 from 'js-md5'\nimport security from './Security'\nimport axios from 'axios'//引入后，可以使用get，post(推荐)\n\nexport default {\n  components:{\n    security,\n  },\n  data(){\n    return{\n      inputcode:'',//动态储存用户输入的验证码\n      code:'',//随机生成的4位数验证码，目标验证码，用来比对inputCode\n      password1:'',//临时明文\n      user:{\n        username:\"\",\n        phone:\"\",\n        password:\"\"//加密后的密码\n      }\n    }\n  },\n  computed:{\n   \n  },\n  methods:{\n    sendCode(){\n       axios.get(\"http://localhost:3000/users?phone=\"+this.user.phone).then((data)=>{\n        if(data.data.length==0){//无此用户，可以注册,然后发送验证码\n          console.log(\"该手机号可以注册\")\n\n        }else{//此用户已存在，请登录\n          console.log(\"有重复phone\")\n          this.$store.dispatch('alert',\"您的手机号已注册请登录\")\n        }\n      }); \n      this.code = Math.random().toString(10).slice(2,6)\n      // alert(\"http://v.juhe.cn/sms/send?mobile=\"+this.user.phone+\"&tpl_id=174546&tpl_value=%23code%23%3D\"+this.code+\"&key=157e3d5c80e9a2af12aac8e5dfa8be5b\")\n    // 这里验证验证码，如果成功再进行post\n\n    //  axios.post(\"http://v.juhe.cn/sms/send?mobile=\"+this.user.phone+\"&tpl_id=174546&tpl_value=%23code%23%3D\"+this.code+\"&key=157e3d5c80e9a2af12aac8e5dfa8be5b\")//axios请求数据\n    //   // .then(function(data){\n    //   //   // return data.data;//axios返回的。\n    //   //   //   return data.json();//vue-resourse请求才用。\n    //   //     console.log(data)\n    //   //   // this.blogs=data.body.slice(0,10)\n    //   //   // console.log(this.blogs)\n    //   // })  //无需返回数据\n    },\n    identify(){\n      this.user.password=md5(this.password1);\n      //验证码正确之后才能post（），inputCode==code时\n      if(this.code==this.inputcode&&this.code!=''){\n        this.post();\n      }else{\n        this.$store.dispatch('alert',\"您的手机号/验证码有错误\")\n      }\n    },\n    post(){\n      axios.post(\"http://localhost:3000/users\",this.user).then((data)=>{\n        console.log(data);\n         // 储存cookie（应该是确定正确注册之后才储存cookie，一次）\n        this.$cookies.set('username',this.user.username,3600*24*10);\n        this.$store.commit('signIn',this.$cookies.get(\"username\"));//改变为登录状态\n        console.log(\"post成功\");\n        this.$router.push({path:'/mine'});\n      })\n    \n  \n\n      // console.log(\"加密成功\")\n      // this.user.password = md5(this.password1);\n      // console.log(this.user)\n      //  axios.post(\"http://localhost:3000/users\",this.user).then(function(data){//这里的地址是第三方测试地址。不能真实写入，但是有响应\n      //   console.log(\"post成功\")\n      //   console.log(data)\n      // })\n    }\n  }\n}\n</script>\n\n\n\n<style scoped>\n\n.sendCodeBtn {\n  cursor: pointer;\n  padding: 4px 8px;\n  border: 0;\n  position: absolute;\n  width: 52px;\n  font-size: 12px;\n  top: 5px;\n  right: 5px;\n  z-index: 3;\n  border-radius: 10px;\n  background-color: rgb(72, 190, 57);\n  color: white;\n}\n.btn {\n  margin: 30px 0;\n}\n</style>"],"sourceRoot":"src/components"}]}